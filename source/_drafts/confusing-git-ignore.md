---
title: 令人费解的git ignore
categories: "Techno"
tags:
  - Git
  - Version Control
---

`.gitignore`是一个在使用Git作为版本控制的repo中非常常见的文件。它用于让Git自动地忽略掉库中一些不需要进行版本管理的文件，如自动生成的缓存文件、自动保存临时文件等。但是，在一些很特殊的需求中，编写`.gitignore`文件似乎是一件非常令人困惑的事情。假如我们在为一个大型的软件添加功能，而我们又不想将自己编写的功能合并到原软件的repo中。此时需要将我们添加的文件单独挑出来。这样的话，我们可以随时去更新上游软件的代码，而不会影响到自己编写的功能。（如果上游软件代码的API没有改变的话）。这意味着，我们要从很多的文件中挑选出少数几个部分组成repo。显然，一个可行的方法是使用合适的`.gitignore`文件把不需要的文件忽略掉。

<!-- more -->

## 示例场景
假设现在整个项目文件夹的结构如下：

  -src
    |- upstream_src
    |  |- ...
    |- my_src
       |- ...
  .gitignore

这里，我们只想对自己添加的文件进行版本管理，即`src/my_src/`下的所有文件。此时`.gitignore`文件应该如何编写呢？

第一反应，我们可以先ignore掉文件夹中所有的文件，然后单独把`src/my_src/`的所有文件挑选出来。写法就变成如下所示：

  % ignore everything
  \*
  % pick up all files in src/my_src
  !src/my_src/*

但是很快我们就会发现，这种写法其实**忽略掉了所有的文件**，而不会将`src/my_src/`给单独挑出来。这就非常的费解了。
