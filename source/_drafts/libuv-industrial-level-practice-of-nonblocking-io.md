---
title: "libuv: 工业级的非阻塞IO的应用"
categories: Technology
tags:
  - libuv
  - Node.js
  - Nonblocking I/O
---

在计算机中，CPU 速度与 I/O 速度的不匹配，一直以来是一个困扰工程师的问题。
一颗普通的 CPU，它读取内部寄存器可能只需要 1ns，但是，
要如果需要从硬盘中读取到某个块的数据，可能需要花费 10ms 左右的时间。
这两种操作的时间差上了 5 个数量级。对于 CPU 而言，
读取硬盘的时间简直和「永远」一样漫长。

<!--more-->

## I/O 密集型

I/O 的速度相较于 CPU 的龟速，使其常常成为程序中的性能瓶颈。毕竟，
巧妇难为无米之炊，在数据到达之前，CPU 也只能空耗着等待。
当 I/O 速度成为了程序完成任务消耗时间的决定因素时，此时程序被认为是
_I/O 密集型(I/O bound)_。典型的 I/O 密集型程序如 Web 服务器。

为了加速 I/O 密集型的程序，在计算机体系层面，人们设计
[存储层次](https://en.wikipedia.org/wiki/Memory_hierarchy)，
希望通过使用高速但是成本更高的材料来*缓存*一些常用的数据，
达到加速 I/O 的目的。这种设计思路推广到了很多网络协议的实现。

## 阻塞 I/O 与 非阻塞 I/O

### 阻塞 I/O 下的并行

### 非阻塞 I/O 的并行

### 阻塞 I/O 与 非阻塞 I/O 的比较

## libuv I/O 循环